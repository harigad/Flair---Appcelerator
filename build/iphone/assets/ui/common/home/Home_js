function home_row(e,t,n,r,i){var s=Ti.UI.createView({width:"290",height:"auto",top:0,layout:"horizontal"});s.add(e),s.add(t),s.add(n);var o=Ti.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",showVerticalScrollIndicator:!1,showHorizontalScrollIndicator:!1,width:290,top:0,left:0,height:i,_container:s});return o.addEventListener("scrollEnd",function(){Ti.API.debug("scrollend"),this.scrollTo(0,0)}),o.add(s),r.add(o),o}function _tabBar(e,t,n){var r=Ti.UI.createView({height:"auto",width:"100%",backgroundImage:"images/headerBg.jpg",backgroundRepeat:!0,bottom:0,layout:"horizontal"}),i=Ti.UI.createSlider({min:1,max:3,value:2,width:220,height:20,top:10,bottom:10,left:50,leftTrackImage:"images/home/logo_small.png",rightTrackImage:"images/home/home_me_btn.png",thumbImage:"images/home/home_checkin_btn.png",highlightedThumbImage:"images/home/logo_small.png",highlightedThumbImage:"images/home/logo_small.png",_currentValue:2,_currentWindow:t});return i.addEventListener("change",function(r){this.value>=1&&this.value<=1.5?this._currentValue!==1?(Ti.API.debug("slide to feed"),this.value=1,this._currentValue=1,this._currentWindow.hide(),this._currentWindow=e,this._currentWindow.show()):this.value=1:this.value>1.5&&this.value<2.5?this._currentValue!==2?(Ti.API.debug("slide to home"),this.value=2,this._currentValue=2,this._currentWindow.hide(),this._currentWindow=t,this._currentWindow.show()):this.value=2:this.value>2.5&&(this._currentValue!==3?(Ti.API.debug("slide to me"),this.value=3,this._currentValue=3,this._currentWindow.hide(),this._currentWindow=n,this._currentWindow.show()):this.value=3)}),r.add(i),r}function _createThumb(e,t){var n=Ti.UI.createView({width:100,height:100,top:-2.5,bottom:-2.5,left:-2.5,right:-2.5,backgroundImage:"images/feed/feed_flair_shadow.png",borderRadius:4,_data:e}),r=Ti.UI.createView({width:"85",height:"85",backgroundColor:t,borderRadius:4}),i=Ti.UI.createView({width:70,height:70,backgroundImage:"images/flairs/100/"+e.id+".png"});return r.add(i),n.add(r),n.addEventListener("touchstart",function(e){this._cancelClick=!1,this.setOpacity(.3)}),n.addEventListener("touchend",function(e){this.setOpacity(1)}),n.addEventListener("touchmove",function(e){this._cancelClick=!0,this.setOpacity(1)}),n}function _createFlairThumb(e,t){var n=_createThumb(e,t);return n.addEventListener("click",function(){Ti.API.debug("Flair Icon Clicked "+e.id),flairWin.init(e)}),n}var portal=require("ui/common/Portal"),login=require("ui/common/Login"),wall=require("ui/common/wall/Wall"),flairWin=require("ui/common/flair/Flair"),profile=require("ui/common/userProfile/UserProfile");exports.init=function(){Ti.API.debug("home init");var e=login.getUser(),t=Ti.UI.createWindow({title:"home",titleImage:"images/home/logo_small.png",barColor:"#000",backgroundColor:"#eee",barImage:"images/headerBg.jpg",borderWidth:0}),n=Ti.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",showVerticalScrollIndicator:!1,showHorizontalScrollIndicator:!1,width:290,top:0,left:17.5,height:398});n.addEventListener("scrollEnd",function(e){Ti.API.debug("scrollEnd"),this.scrollTo(0,0)});var r=Ti.UI.createView({width:"290",height:"auto",top:15,layout:"horizontal"}),i=wall.init("nearby"),s=wall.init("friends"),o=profile.init(e.getId(),e.getName(),e.getPhoto()),u=_createThumb({id:"nearby",photo:""},"#eee");u.addEventListener("click",function(e){portal.open(i)});var a=_createThumb({id:"friends",photo:""},"#ddd");a.addEventListener("click",function(e){portal.open(s)});var f=_createThumb({id:"me",photo:""},"#eee");f.addEventListener("click",function(e){portal.open(o)}),r.add(u),r.add(a),r.add(f);var l=home_row(_createFlairThumb({id:1,photo:""},"#ddd"),_createFlairThumb({id:2,photo:""},"#eee"),_createFlairThumb({id:3,photo:""},"#ddd"),r,290),c=home_row(_createFlairThumb({id:7,photo:""},"#eee"),_createFlairThumb({id:8,photo:""},"#ddd"),_createFlairThumb({id:9,photo:""},"#eee"),l._container,192),h=home_row(_createFlairThumb({id:4,photo:""},"#ddd"),_createFlairThumb({id:5,photo:""},"#eee"),_createFlairThumb({id:6,photo:""},"#ddd"),c._container,94);return c._container.add(Ti.UI.createView({width:"290",height:"2"})),n.add(r),t.add(n),t}